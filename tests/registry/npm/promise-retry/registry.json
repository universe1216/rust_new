{"name":"promise-retry","description":"Retries a function that returns a promise, leveraging the power of the retry module.","dist-tags":{"latest":"2.0.1"},"versions":{"2.0.1":{"name":"promise-retry","version":"2.0.1","description":"Retries a function that returns a promise, leveraging the power of the retry module.","main":"index.js","scripts":{"test":"mocha --bail -t 10000"},"bugs":{"url":"https://github.com/IndigoUnited/node-promise-retry/issues/"},"repository":{"type":"git","url":"git://github.com/IndigoUnited/node-promise-retry.git"},"author":{"name":"IndigoUnited","email":"hello@indigounited.com","url":"http://indigounited.com"},"license":"MIT","devDependencies":{"expect.js":"^0.3.1","mocha":"^8.0.1","sleep-promise":"^8.0.1"},"dependencies":{"err-code":"^2.0.2","retry":"^0.12.0"},"engines":{"node":">=10"},"gitHead":"7fb08491112cffe5a0dd11805eff20ca6b6133ac","_id":"promise-retry@2.0.1","_nodeVersion":"12.16.1","_npmVersion":"6.14.1","dist":{"integrity":"sha512-y+WKFlBR8BGXnsNlIHFGPZmyDf3DFMoLhaflAnyZgV6rG6xu+JwesTo2Q9R6XwYmtmwAFCkAk3e35jEdoeh/3g==","shasum":"ff747a13620ab57ba688f5fc67855410c370da22","tarball":"http://localhost:4260/promise-retry/promise-retry-2.0.1.tgz","fileCount":8,"unpackedSize":15556,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJe5iFvCRA9TVsSAnZWagAAs+sP/3gQa2kWX2l2wsTAhqem\ngWWXM7Ds/O+GFqE5it5MOiMsoz6eDqKJPgpKJmC0snJbvewZ5qRzvKcRkax1\nzqVPPJStGYVnnM55DYcfciG2QBxE2dgX2h3iE/oxXP54TxbtVGRWoL2vWIQ1\nb+CyY8EKu7hVwXmBPqA0k2LUEVI8x8dluWFr3cNc/uPP0y7aCft5ylXN5HCb\nSs46NvxKnKHX98s8UdXH5Qcqc9t3H03je1dn5o6faq00Yh4JbxzrxL4a3q2N\n4oq8yE97naYSfvHrfjUdfLu/FDCXgC6cksdVJMm/lEtz4bRz1TGhKftmM7BN\nUVX3JqL8UCU+FUUv0XQLXl73ydQR3soutYM2TtIFlmanoXi4SsGOLHZ+jXtX\nPgDVdRc+uCQiX1ro0SLHZO8ZOxnjkAFg2VIzSbD3uClk9YwyNkE7FIF0ZsCq\nF4NLWn8B08fKDDpBFtEmiNAdf/+EtCti3Sy2dPsAjbfMPUIJkt0un3cDpdDU\nKtfrCCNInT1irEyx3xvdTmDVY184KHKxJ28F4yi9I7IdqjdrL696dMUYaqJt\nUpi6nTW3rlhZ9JWPOeRPwZinGLeADN0RlTjfixazctDpFzqRo9dClXiud63u\nmsAF+XjtzzJTJP0QBY2D+wKtcJBUj3GnrIZFGWVxbLoGQTMq7PbArx4A3RIC\n6yBc\r\n=YUSa\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDuoveu5MeEupK25Y5ewNOYZMy+5SF1GM5edr4BD1TBLwIgWATsYaSUW6HxeuaRuu8bSRjKtAe4SPpu1s90VYNrN4w="}]},"directories":{},"_hasShrinkwrap":false}},"readme":"# node-promise-retry\n\n[![NPM version][npm-image]][npm-url] [![Downloads][downloads-image]][npm-url] [![Build Status][travis-image]][travis-url] [![Dependency status][david-dm-image]][david-dm-url] [![Dev Dependency status][david-dm-dev-image]][david-dm-dev-url] [![Greenkeeper badge][greenkeeper-image]][greenkeeper-url]\n\n[npm-url]:https://npmjs.org/package/promise-retry\n[downloads-image]:http://img.shields.io/npm/dm/promise-retry.svg\n[npm-image]:http://img.shields.io/npm/v/promise-retry.svg\n[travis-url]:https://travis-ci.org/IndigoUnited/node-promise-retry\n[travis-image]:http://img.shields.io/travis/IndigoUnited/node-promise-retry/master.svg\n[david-dm-url]:https://david-dm.org/IndigoUnited/node-promise-retry\n[david-dm-image]:https://img.shields.io/david/IndigoUnited/node-promise-retry.svg\n[david-dm-dev-url]:https://david-dm.org/IndigoUnited/node-promise-retry?type=dev\n[david-dm-dev-image]:https://img.shields.io/david/dev/IndigoUnited/node-promise-retry.svg\n[greenkeeper-image]:https://badges.greenkeeper.io/IndigoUnited/node-promise-retry.svg\n[greenkeeper-url]:https://greenkeeper.io/\n\nRetries a function that returns a promise, leveraging the power of the [retry](https://github.com/tim-kos/node-retry) module to the promises world.\n\nThere's already some modules that are able to retry functions that return promises but\nthey were rather difficult to use or do not offer an easy way to do conditional retries.\n\n\n## Installation\n\n`$ npm install promise-retry`\n\n\n## Usage\n\n### promiseRetry(fn, [options])\n\nCalls `fn` until the returned promise ends up fulfilled or rejected with an error different than\na `retry` error.   \nThe `options` argument is an object which maps to the [retry](https://github.com/tim-kos/node-retry) module options:\n\n- `retries`: The maximum amount of times to retry the operation. Default is `10`.\n- `factor`: The exponential factor to use. Default is `2`.\n- `minTimeout`: The number of milliseconds before starting the first retry. Default is `1000`.\n- `maxTimeout`: The maximum number of milliseconds between two retries. Default is `Infinity`.\n- `randomize`: Randomizes the timeouts by multiplying with a factor between `1` to `2`. Default is `false`.\n\n\nThe `fn` function will receive a `retry` function as its first argument that should be called with an error whenever you want to retry `fn`. The `retry` function will always throw an error.   \nIf there are retries left, it will throw a special `retry` error that will be handled internally to call `fn` again.\nIf there are no retries left, it will throw the actual error passed to it.\n\nIf you prefer, you can pass the options first using the alternative function signature `promiseRetry([options], fn)`.\n\n## Example\n```js\nvar promiseRetry = require('promise-retry');\n\n// Simple example\npromiseRetry(function (retry, number) {\n    console.log('attempt number', number);\n\n    return doSomething()\n    .catch(retry);\n})\n.then(function (value) {\n    // ..\n}, function (err) {\n    // ..\n});\n\n// Conditional example\npromiseRetry(function (retry, number) {\n    console.log('attempt number', number);\n\n    return doSomething()\n    .catch(function (err) {\n        if (err.code === 'ETIMEDOUT') {\n            retry(err);\n        }\n\n        throw err;\n    });\n})\n.then(function (value) {\n    // ..\n}, function (err) {\n    // ..\n});\n```\n\n\n## Tests\n\n`$ npm test`\n\n\n## License\n\nReleased under the [MIT License](http://www.opensource.org/licenses/mit-license.php).\n","homepage":"https://github.com/IndigoUnited/node-promise-retry#readme","repository":{"type":"git","url":"git://github.com/IndigoUnited/node-promise-retry.git"},"author":{"name":"IndigoUnited","email":"hello@indigounited.com","url":"http://indigounited.com"},"bugs":{"url":"https://github.com/IndigoUnited/node-promise-retry/issues/"},"license":"MIT","readmeFilename":"README.md"}
